<%
const formatDate = (date, str) => {
    let _str = !str ? '-' : str
    const zero = (m) => {
        return m < 10 ? '0' + m : m
    }
    let time = new Date(date)
    let y = time.getFullYear()
    let m = time.getMonth() + 1
    let d = time.getDate()
    if (date) {
        return y + _str + zero(m) + _str + zero(d)
    } else {
        return ''
    }
}
const getTimeContent = (publishTime, requestTime) => {
    let limit = parseInt((requestTime - publishTime)) / 1000
    let content = ''
    if (limit < 60) {
        content = '刚刚'
    } else if (limit >= 60 && limit < 3600) {
        content = Math.floor(limit / 60) + '分钟前'
    } else if (limit >= 3600 && limit < 86400) {
        content = Math.floor(limit / 3600) + '小时前'
    } else {
        content = formatDate(publishTime)
    }
    return content
}
 %>
<div class="swiper-container wrap-box" id="hxwrap">
    <div class="huoxing-top" id="huoxingTop"><a href="/"><img src="../img/m-img/top.jpg" alt=""></a></div>
    <div class="swiper-pagination body-wrap" id="hxWrapPage"></div>
    <div class="swiper-wrapper overall-box" id="overAllBox">
        <div class="swiper-slide out-box white-bg">
            <div class="page-con-wrap" id="pageConWrap0">
                <div class="swiper-container banner" id="newsWrap">
                    <div class="swiper-wrapper newsWrap"></div>
                </div>
                <div class="currency-price">
                    <div class="price-list" id="eightClock">
                        <div class="price-number">
                            <p>火星八点</p>
                        </div>
                    </div>
                    <div class="price-list" id="tenQuestions">
                        <div class="price-number">
                            <p>王峰十问</p>
                        </div>
                    </div>
                    <div class="price-list" id="otherColumn">
                        <div class="price-number">
                            <p>火星社区</p>
                        </div>
                    </div>
                </div>
                <!--广告/专题-->
                <div class="index-ad"></div>

                <div class="news-box">
                    <h6><span></span>今日新闻</h6>
                    <div class="list-box" id="listBox0" data-page="<%= data.currentPage %>">
                        <%
                        if (data.inforList.length > 0) {
                            data.inforList.map((item) => {
                                %>
                        <div class="news-list-more ">
                            <a href="/newsdetail?id=<%= item.id %>">
                                <div class="title"><%= item.title %></div>
                                <div class="list-text">
                                    <div class="author read-number clearfix"><sapn><%= item.hotCounts %></sapn></div>
                                    <div class="time clearfix"><span><%= getTimeContent(item.publishTime, data.currentTime) %></span></div>
                                </div>
                                <div class="cover-img-sma"><img src="<%= !item.coverPic || !JSON.parse(item.coverPic).wap_small ? '' : JSON.parse(item.coverPic).wap_small %>" alt=""></div>
                            </a>
                        </div>
                        <%
                            })
                        }
                         %>
                    </div>
                    <div class="btn-more" id="btnMore0" data-type="0">加载更多</div>
                </div>
            </div>
        </div>

        <!--快讯-->
        <div class="swiper-slide out-box">
            <div class="news-fash page-con-wrap" id="pageConWrapLive">
                <div class="fash-title"><img src="../img/m-img/time.png" alt=""/><span>最新</span></div>
                <div class="lives-box"></div>
                <div class="flash-more-btn">
                    <div class="btn-more-flash" id="btnMore100" data-type="1">加载更多</div>
                </div>
            </div>
        </div>

        <!--新闻-->
        <div class="swiper-slide out-box white-bg">
            <div class="blockchain page-con-wrap" id="pageConWrap2">
                <div class="blockchain-box" id="listBox2" data-page="1"></div>
                <div class="btn-more" id="btnMore2" data-type="2">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap14">
                <div class="btb-box" id="listBox14" data-page="1"></div>
                <div class="btn-more" id="btnMore14" data-type="14">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap13">
                <div class="btb-box" id="listBox13" data-page="1"></div>
                <div class="btn-more" id="btnMore13" data-type="13">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap6">
                <div class="btb-box" id="listBox6" data-page="1"></div>
                <div class="btn-more" id="btnMore6" data-type="6">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap3">
                <div class="btb-box" id="listBox3" data-page="1"></div>
                <div class="btn-more" id="btnMore3" data-type="3">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap4">
                <div class="btb-box" id="listBox4" data-page="1"></div>
                <div class="btn-more" id="btnMore4" data-type="4">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap7">
                <div class="btb-box" id="listBox7" data-page="1"></div>
                <div class="btn-more" id="btnMore7" data-type="7">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap8">
                <div class="btb-box" id="listBox8" data-page="1"></div>
                <div class="btn-more" id="btnMore8" data-type="8">加载更多</div>
            </div>
        </div>
        <div class="swiper-slide out-box white-bg">
            <div class="btb page-con-wrap" id="pageConWrap9">
                <div class="btb-box" id="listBox9" data-page="1"></div>
                <div class="btn-more" id="btnMore9" data-type="9">加载更多</div>
            </div>
        </div>
    </div>
</div>
@@include('./share.ejs')
